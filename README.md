# mini-block

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Just a very simple Blog.

## Used Stack

### Building

- Docker

### Frontend

- Next

### Backend

- MongoDB
- Go CRUD

## Data

- Posts
  - \_id
  - title
  - text
  - createdAt
  - updatedAt

## Usage

Very simple:

> git clone https://github.com/Schattenbrot/mini-blog.git

Navigate to the root-folder:

> cd mini-blog

### Start backend

Start docker-compose:

> docker-compose up

To stop the program (db-data will get saved in the volume "mini-blog_db-data"):

> docker-compose down

## Start frontend

Navigate to the frontend folder:

> cd frontend

Run:

> npm install

When the previous command is finished, run:

> npm run dev

## Backend API

Simple CRUD implementation.

### Quick Overview of supported Requests

| Request           | Description                        |
| ----------------- | ---------------------------------- |
| [GET](#get)       | returns all posts or a single post |
| [POST](#post)     | posts a single post                |
| [DELETE](#delete) | deletes a post based on its id     |

### Routing

#### GET

> GET /v1/posts[/options]

| Parameter | Description                                 |
| --------- | ------------------------------------------- |
| `/`       | Returns `all posts`.                        |
| `/:id`    | Returns a `single post` based on it's `id`. |

Example for getting a single post:

```
{
  "post": {
    "_id": "6164d1faf656734a7edd868c",
    "title": "uwu",
    "text": "uwu text",
    "created_at": "2021-10-12T00:08:26.983Z",
    "updated_at": "2021-10-12T00:08:26.983Z"
  }
}
```

Example for getting all posts:

```
{
  "posts": [
    {
      "_id": "6164884b7b4bdf0578f75a8d",
      "title": "first post",
      "text": "first posts text"
    },
    {
      "_id": "6164bc53511d7d0fac32d883",
      "title": "third post",
      "text": "third post text"
    }
  ]
}
```

#### POST

> POST /v1/posts

Inserts a `post` into the database.

Example for the required body/payload:

```
{
  title: "some title",
  text: "some text",
}
```

The ID, updatedAt and createdAt fields will be automatically generated by the API.

The response of this method:

```
{
  "response": {
    "ok": true,
    "_id": "6164d4e4f656734a7edd868d"
  }
}
```

#### DELETE

> DELETE /v1/posts/:id

Deletes a post based on it's `id`.

Returns the number of deleted posts:

```
{
  "deletedCount": 1
}
```

### Models

#### Posts

    ID        string
    Title     string
    Text      string
    CreatedAt *time.Time
    UpdatedAt *time.Time

## Todo

### Backend

- Payload validation and errors accordingly.
- Enable paging for getAllPosts (the database is bound to get bigger normally)
- Add meaningful comments.
- Cors handling! (Delete doesn't work with the simplest solution I found, so change that)

### Frontend

- The frontend is kinda missing. So needs to be implemented at some point. Will be created in the folder "frontend".
- Maybe implement time difference for posts that it doesn't show the date but the mins/hours/days from the current time.
- Not totally missing anymore but:

  - Styles are missing.
  - centralized fetching (happens all over the place inside of components instead of functions)
  - Check again for Delete after cors is fixed (in components/home/PostListItem.jsx for some stupid reason)
  - create useInput component to make it reuseable. (Not needed now ... but great practice)

### Docker-files

- After project is finished adjust the docker-files for building the project for production.
  - Adjust README "Usage" part accordingly.

## License

This project is licensed under [MIT](LICENSE).
